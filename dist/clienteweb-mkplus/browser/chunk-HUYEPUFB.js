import{v as f}from"./chunk-Z5HBHXP3.js";import{a as t}from"./chunk-I2A4HNRV.js";import{x as c}from"./chunk-JJK3Y3Z5.js";import{C as l,X as d,aa as o,n as s,oa as n,q as p}from"./chunk-XFJKNVDY.js";var m=class a{http=o(c);utilidadesService=o(f);api=t.api;servicio=`${t.api}${t.paths.cotizador}`;email=n("");pdfBytes=n(null);setEmail(e){this.email.set(e)}setPdfBytes(e){this.pdfBytes.set(e)}sendEmailWithPdf(e,r){let i=new FormData;i.append("email",r);let v=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength),b=new Blob([v],{type:"application/pdf"});i.append("file",b,"document.pdf"),this.http.post(`${this.api}/email-prepagado`,i).subscribe({next:()=>{this.utilidadesService.abrirModalInfo("Informaci\xF3n","PDF enviado correctamente.","Cerrar")},error:u=>{console.error("Error al enviar el PDF:",u),this.utilidadesService.abrirModalInfo("Informaci\xF3n","No se pudo enviar el PDF. Intenta nuevamente.","Cerrar")}})}descargarResumenPedidoPdf(e){return this.http.post(`${this.servicio}/generarPdf`,e,{responseType:"blob"}).pipe(p(r=>r),l(this.handleError))}handleError(e){let r="Ha ocurrido un error inesperado.";return e.error instanceof ErrorEvent?r=`Error del cliente: ${e.error.message}`:r=`Error ${e.status}: ${e.message}`,console.error("[EmailPrepagadoService] Error:",r),s(()=>new Error(r))}static \u0275fac=function(r){return new(r||a)};static \u0275prov=d({token:a,factory:a.\u0275fac,providedIn:"root"})};export{m as a};
