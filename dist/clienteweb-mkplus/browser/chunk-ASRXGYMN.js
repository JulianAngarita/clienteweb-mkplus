import{a as H}from"./chunk-4BYAK2AJ.js";import{a as z}from"./chunk-BBQ7KRAI.js";import"./chunk-3YKSX6TR.js";import{a as O}from"./chunk-YQHSFYFW.js";import"./chunk-GN2ZQHZ5.js";import"./chunk-I4STTD3A.js";import"./chunk-OK34JCII.js";import{a as L}from"./chunk-3QEI6ENN.js";import{h as $,v as K}from"./chunk-RRJ2G4CW.js";import{b as F,d as P,g as D,u as W}from"./chunk-YPYZVSIH.js";import"./chunk-I2A4HNRV.js";import{l as j,q as A,s as N}from"./chunk-JJK3Y3Z5.js";import{Bb as b,Db as m,Ea as o,Ob as i,Pb as s,Qb as c,Va as C,Vb as g,Wb as E,Xb as I,aa as f,bc as T,fa as v,fb as R,fc as u,ga as S,gb as w,hb as M,jb as V,jc as x,kb as k,lb as _,mb as t,nb as e,ob as B,ub as h}from"./chunk-XFJKNVDY.js";import{h as y}from"./chunk-FJYW2LMB.js";var U=a=>({"background-color":a,color:"white",padding:"4px 10px","border-radius":"6px","font-size":"0.85rem","font-weight":"500"});function q(a,r){if(a&1){let n=h();t(0,"div",1)(1,"div",3)(2,"h2",4),i(3,"Bienvenido,"),e(),t(4,"h4",5),i(5,"Inicia una nueva solicitud"),e(),t(6,"div",6)(7,"label",7),i(8,"Kilometraje"),e(),t(9,"input",8),I("ngModelChange",function(l){v(n);let p=m();return E(p.filtroRedencion.kilometraje,l)||(p.filtroRedencion.kilometraje=l),S(l)}),e()(),t(10,"div",5)(11,"label",7),i(12,"VIN"),e(),t(13,"input",9),I("ngModelChange",function(l){v(n);let p=m();return E(p.filtroRedencion.vin,l)||(p.filtroRedencion.vin=l),S(l)}),e()(),t(14,"button",10),b("click",function(){v(n);let l=m();return S(l.buscar())}),i(15," Buscar "),e()()()}if(a&2){let n=m();o(9),g("ngModel",n.filtroRedencion.kilometraje),o(4),g("ngModel",n.filtroRedencion.vin)}}function J(a,r){if(a&1){let n=h();t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td"),i(12),e(),t(13,"td"),i(14),e(),t(15,"td"),i(16),u(17,"currency"),e(),t(18,"td"),i(19),u(20,"currency"),e(),t(21,"td"),i(22),u(23,"currency"),e(),t(24,"td"),i(25),u(26,"currency"),e(),t(27,"td"),i(28),u(29,"currency"),e(),t(30,"td",4),i(31),u(32,"currency"),e(),t(33,"td",4)(34,"span",20),i(35),e()(),t(36,"td",4)(37,"button",21),b("click",function(){let l=v(n).$implicit,p=m(2);return S(p.verServicioRedencion(l))}),i(38," Redimir "),e()()()}if(a&2){let n=r.$implicit,d=m(2);o(2),s(n.solicitud.numero),o(2),s(n.concesionario.grupo),o(2),s(n.concesionario.nombre),o(2),s(n.frecuencia_kilometraje),o(2),s(n.frecuencia_meses),o(2),s(n.vigencia_kilometraje),o(2),s(n.vigencia_meses),o(2),c(" ",x(17,15,n.precios_insumos,"$ ","symbol","0.0")),o(3),c(" ",x(20,20,n.precios_repuestos,"$ ","symbol","0.0")),o(3),c(" ",x(23,25,n.precios_mano_obra,"$ ","symbol","0.0")),o(3),c(" ",x(26,30,n.precios_comision,"$ ","symbol","0.0")),o(3),c(" ",x(29,35,n.precios_iva,"$ ","symbol","0.0")),o(3),c(" ",x(32,40,n.precios_valor_total,"$ ","symbol","0.0")),o(3),_("ngStyle",T(45,U,d.color(n.redencion_estatus))),o(),c(" ",n.redencion_estatus," ")}}function Q(a,r){if(a&1&&(t(0,"div",2)(1,"h1",11),i(2,"Redenci\xF3n de servicios"),e(),t(3,"div",12)(4,"p",13)(5,"strong"),i(6,"Veh\xEDculo:"),e(),i(7),e(),t(8,"p",13)(9,"strong"),i(10,"VIN:"),e(),i(11),e(),t(12,"p",13)(13,"strong"),i(14,"Placa:"),e(),i(15),e()(),t(16,"div",14)(17,"table",15)(18,"thead",16)(19,"tr")(20,"th",17),i(21,"Solicitud"),e(),t(22,"th",18),i(23,"Concesionario"),e(),t(24,"th",18),i(25,"Frecuencia"),e(),t(26,"th",18),i(27,"Vigencia"),e(),t(28,"th",19),i(29,"Valores"),e(),t(30,"th",17),i(31,"Estado"),e(),t(32,"th",17),i(33,"Acciones"),e()(),t(34,"tr")(35,"th"),i(36,"Grupo"),e(),t(37,"th"),i(38,"Nombre"),e(),t(39,"th"),i(40,"Km"),e(),t(41,"th"),i(42,"Meses"),e(),t(43,"th"),i(44,"Km"),e(),t(45,"th"),i(46,"Meses"),e(),t(47,"th"),i(48,"Insumos"),e(),t(49,"th"),i(50,"Repuestos"),e(),t(51,"th"),i(52,"Mano de Obra"),e(),t(53,"th"),i(54,"Administraci\xF3n"),e(),t(55,"th"),i(56,"IVA"),e(),t(57,"th"),i(58,"Total"),e()()(),t(59,"tbody"),V(60,J,39,47,"tr",null,M),e()()()()),a&2){let n=m();o(7),c(" ",n.vehiculo.descripcionVersion),o(4),c(" ",n.vehiculo.vin),o(4),c(" ",n.vehiculo.placa),o(45),k(n.servicios)}}var G=class a{solicitudesService=f(O);utilidadesService=f(K);modalService=f($);consultaActiva=!0;servicios=[];vehiculo=structuredClone(z);cargando=!1;filtroInicial={kilometraje:"",vin:""};filtroRedencion=structuredClone(this.filtroInicial);color(r){return r==="Pendiente"?"green":"blue"}verServicioRedencion=r=>y(this,null,function*(){let n=this.modalService.open(H,{centered:!0,size:"xl"});r.redencion_estatus==="Pendiente"&&(n.componentInstance.evento="redimir"),n.componentInstance.idServicio=r.idServicio??"",n.componentInstance.idSolicitud=r._id??"",(yield n.result)&&this.buscar()});buscar=()=>{this.cargando=!0,this.solicitudesService.consultaSolicitudRedencion(this.filtroRedencion).subscribe({next:r=>{this.cargando=!1,r.estatus&&(this.consultaActiva=!1,this.servicios=r.data.servicios,this.vehiculo=r.data.vehiculo),this.utilidadesService.abrirModalInfo("Informaci\xF3n",r.resultadoOperacion,"Aceptar")},error:r=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",r.error.resultadoOperacion,"Aceptar")}})};static \u0275fac=function(n){return new(n||a)};static \u0275cmp=C({type:a,selectors:[["app-redimir"]],decls:3,vars:3,consts:[[3,"messageInput","loading"],[1,"container","align-items-center","d-flex","justify-content-center","mt-5","py-5",2,"min-height","80vh"],[1,"container","my-5","py-5"],[1,"col-12","col-md-6"],[1,"fw-bold"],[1,"mb-4"],[1,"mb-3"],[1,"form-label"],["type","text",1,"input-kia-field",3,"ngModelChange","ngModel"],["type","text","placeholder","",1,"input-kia-field",3,"ngModelChange","ngModel"],["type","button",1,"btn","boton-principal-kia","px-4",3,"click"],[1,"fw-bold","display-4"],[1,"mt-3"],[1,"mb-0"],[1,"table-responsive","mt-4"],[1,"table","table-bordered","align-middle","text-center"],[1,"table-light"],["rowspan","2"],["colspan","2"],["colspan","6"],[3,"ngStyle"],[1,"btn","boton-secondary-kia",3,"click"]],template:function(n,d){n&1&&(B(0,"app-loading-screen",0),R(1,q,16,2,"div",1)(2,Q,62,3,"div",2)),n&2&&(_("messageInput","Cargando...")("loading",d.cargando),o(),w(d.consultaActiva?1:2))},dependencies:[W,F,P,D,L,N,j,A],encapsulation:2})};export{G as Redimir};
