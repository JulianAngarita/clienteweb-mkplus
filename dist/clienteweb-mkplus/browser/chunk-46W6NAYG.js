import{a as o}from"./chunk-I2A4HNRV.js";import{e as p}from"./chunk-PTR2WAUU.js";import{x as l}from"./chunk-JJK3Y3Z5.js";import{C as a,S as s,X as c,aa as i,n}from"./chunk-XFJKNVDY.js";var m=class t{http=i(l);router=i(p);servicio=`${o.api}${o.paths.autenticacion}`;iniciarSesion(e){return this.http.post(`${this.servicio}/iniciarSesion`,e).pipe(s(r=>{r?.estatus&&r?.token&&this.guardarSesion(r.token,r.usuario)}),a(r=>(console.error("Error en iniciarSesion:",r),n(()=>new Error("Error al iniciar sesi\xF3n.")))))}guardarSesion(e,r){localStorage.setItem("token",JSON.stringify(e)),localStorage.setItem("usuario",JSON.stringify(r))}cerrarSesion(){localStorage.removeItem("token"),localStorage.removeItem("usuario"),this.router.navigate(["/auth/log-in"])}obtenerToken(){return JSON.parse(localStorage.getItem("token")||"null")}estaAutenticado(){return!!this.obtenerToken()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})};export{m as a};
