import{a as H}from"./chunk-3QEI6ENN.js";import{g as P,h as G,v as k}from"./chunk-Z5HBHXP3.js";import{a as L,b as j,d as z,g as U,u as B}from"./chunk-YPYZVSIH.js";import{a as V}from"./chunk-I2A4HNRV.js";import{s as F,x as N}from"./chunk-JJK3Y3Z5.js";import{Bb as d,Db as p,Ea as l,Ob as r,Pb as m,Qb as h,Va as w,Vb as b,Wb as C,X as D,Xb as g,aa as u,fa as v,fb as S,ga as _,gb as E,hb as A,jb as I,kb as y,lb as O,mb as t,nb as i,ob as f,ub as T}from"./chunk-XFJKNVDY.js";import{h as R}from"./chunk-FJYW2LMB.js";var x=class s{http=u(N);servicio=`${V.api}${V.paths.terminos}`;consultarTerminos=n=>{try{return this.http.post(this.servicio+"/consulta",n)}catch(e){return e}};crearTerminos=n=>{try{return this.http.post(this.servicio+"/crear",n)}catch(e){return e}};actualizarTerminos=n=>{try{return this.http.post(this.servicio+"/actualizar",n)}catch(e){return e}};eliminarTerminos=n=>{try{return this.http.post(this.servicio+"/eliminar",n)}catch(e){return e}};static \u0275fac=function(e){return new(e||s)};static \u0275prov=D({token:s,factory:s.\u0275fac,providedIn:"root"})};var Z={activo:!1,version:"",vigencia:"",titulo:"",subtitulo:"",articulos:[]},W={titulo:"",subtitulo:"",contenido:""},J={activo:!0};function X(s,n){if(s&1){let e=T();t(0,"div",19)(1,"div",27)(2,"div")(3,"strong"),r(4),i(),f(5,"br"),t(6,"small",23),r(7),i()(),t(8,"button",28),d("click",function(){let c=v(e).$index,a=p();return _(a.eliminarArticulo(c))}),f(9,"i",29),i()(),t(10,"p",30),r(11),i()()}if(s&2){let e=n.$implicit;l(4),m(e.titulo),l(3),m(e.subtitulo),l(4),m(e.contenido)}}function Y(s,n){if(s&1){let e=T();t(0,"button",31),d("click",function(){v(e);let c=p();return _(c.guardar())}),r(1),i()}if(s&2){let e=p();l(),h(" ",e.cargando?"Guardando...":"Guardar"," ")}}function $(s,n){if(s&1){let e=T();t(0,"button",31),d("click",function(){v(e);let c=p();return _(c.actualizar())}),r(1),i()}if(s&2){let e=p();l(),h(" ",e.cargando?"Actualizando...":"Actualizar"," ")}}var M=class s{modalActivo=u(P);terminosCondicionesService=u(x);utilidadesService=u(k);cargando=!1;nuevoArticulo=Object.assign({},W);datosTerminosCondiciones=Object.assign({},Z);evento="EVENTO_GUARDAR";agregarArticulo=()=>{this.nuevoArticulo.titulo.length===0||this.nuevoArticulo.contenido.length===0||(this.datosTerminosCondiciones.articulos.push(this.nuevoArticulo),this.nuevoArticulo=Object.assign({},W))};eliminarArticulo=n=>{this.datosTerminosCondiciones.articulos.splice(n,1)};guardar=()=>{this.terminosCondicionesService.crearTerminos(this.datosTerminosCondiciones).subscribe({next:n=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",n.resultadoOperacion,"Aceptar"),n.estatus&&this.modalActivo.close(!0)},error:n=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",n.error.resultadoOperacion,"Aceptar")}})};actualizar=()=>{this.cargando=!0,"creado"in this.datosTerminosCondiciones&&delete this.datosTerminosCondiciones.creado,"actualizado"in this.datosTerminosCondiciones&&delete this.datosTerminosCondiciones.actualizado,"__v"in this.datosTerminosCondiciones&&delete this.datosTerminosCondiciones.__v,"editado"in this.datosTerminosCondiciones&&delete this.datosTerminosCondiciones.editado,this.terminosCondicionesService.actualizarTerminos(this.datosTerminosCondiciones).subscribe({next:n=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",n.resultadoOperacion,"Aceptar"),n.estatus&&this.modalActivo.close(!0)},error:n=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",n.error.resultadoOperacion,"Aceptar")}})};static \u0275fac=function(e){return new(e||s)};static \u0275cmp=w({type:s,selectors:[["app-modal-terminos-condiciones"]],inputs:{datosTerminosCondiciones:"datosTerminosCondiciones",evento:"evento"},decls:58,vars:10,consts:[[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-pencil-square","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"fw-bold","mb-3"],[1,"row","g-3"],[1,"col-md-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"fw-bold","mt-4"],[1,"col-md-6"],[1,"col-12"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-outline-dark","rounded-pill","px-3","d-inline-flex","align-items-center","gap-2",3,"click"],[1,"fa-solid","fa-plus"],[1,"mt-3"],[1,"border","rounded","p-3","mb-2","bg-light"],[1,"mt-4","d-flex","align-items-center","gap-2"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModelChange","ngModel"],[1,"text-muted"],[1,"modal-footer"],[1,"btn","boton-secondary-kia",3,"click"],[1,"btn","boton-principal-kia"],[1,"d-flex","justify-content-between"],[1,"btn","btn-outline-dark","btn-sm","rounded-circle","p-3","d-inline-flex","align-items-center","gap-2",3,"click"],[1,"fa-solid","fa-trash"],[1,"mb-0","mt-2",2,"white-space","pre-wrap"],[1,"btn","boton-principal-kia",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h5",1),f(2,"i",2),r(3," Formulario Terminos & Condiciones "),i(),t(4,"button",3),d("click",function(){return o.modalActivo.close(!1)}),i()(),t(5,"div",4)(6,"h6",5),r(7,"Datos"),i(),t(8,"div",6)(9,"div",7)(10,"label",8),r(11,"Versi\xF3n"),i(),t(12,"input",9),g("ngModelChange",function(a){return C(o.datosTerminosCondiciones.version,a)||(o.datosTerminosCondiciones.version=a),a}),i()(),t(13,"div",7)(14,"label",8),r(15,"Vigencia"),i(),t(16,"input",10),g("ngModelChange",function(a){return C(o.datosTerminosCondiciones.vigencia,a)||(o.datosTerminosCondiciones.vigencia=a),a}),i()(),t(17,"div",7)(18,"label",8),r(19,"T\xEDtulo"),i(),t(20,"input",9),g("ngModelChange",function(a){return C(o.datosTerminosCondiciones.titulo,a)||(o.datosTerminosCondiciones.titulo=a),a}),i()(),t(21,"div",7)(22,"label",8),r(23,"Subt\xEDtulo"),i(),t(24,"input",9),g("ngModelChange",function(a){return C(o.datosTerminosCondiciones.subtitulo,a)||(o.datosTerminosCondiciones.subtitulo=a),a}),i()()(),t(25,"h6",11),r(26,"Art\xEDculos"),i(),t(27,"div",6)(28,"div",12)(29,"label",8),r(30,"T\xEDtulo"),i(),t(31,"input",9),g("ngModelChange",function(a){return C(o.nuevoArticulo.titulo,a)||(o.nuevoArticulo.titulo=a),a}),i()(),t(32,"div",12)(33,"label",8),r(34,"Subt\xEDtulo"),i(),t(35,"input",9),g("ngModelChange",function(a){return C(o.nuevoArticulo.subtitulo,a)||(o.nuevoArticulo.subtitulo=a),a}),i()(),t(36,"div",13)(37,"label",8),r(38,"Contenido\u2026"),i(),t(39,"textarea",14),g("ngModelChange",function(a){return C(o.nuevoArticulo.contenido,a)||(o.nuevoArticulo.contenido=a),a}),r(40,"      "),i()(),t(41,"div",15)(42,"button",16),d("click",function(){return o.agregarArticulo()}),f(43,"i",17),r(44," Agregar Art\xEDculo "),i()()(),t(45,"div",18),I(46,X,12,3,"div",19,A),i(),t(48,"div",20)(49,"div",21)(50,"input",22),g("ngModelChange",function(a){return C(o.datosTerminosCondiciones.activo,a)||(o.datosTerminosCondiciones.activo=a),a}),i()(),t(51,"span",23),r(52," Si est\xE1 desactivado, no estar\xE1 disponible en la oferta comercial "),i()()(),t(53,"div",24)(54,"button",25),d("click",function(){return o.modalActivo.close(!1)}),r(55," Cancelar "),i(),S(56,Y,2,1,"button",26),S(57,$,2,1,"button",26),i()),e&2&&(l(12),b("ngModel",o.datosTerminosCondiciones.version),l(4),b("ngModel",o.datosTerminosCondiciones.vigencia),l(4),b("ngModel",o.datosTerminosCondiciones.titulo),l(4),b("ngModel",o.datosTerminosCondiciones.subtitulo),l(7),b("ngModel",o.nuevoArticulo.titulo),l(4),b("ngModel",o.nuevoArticulo.subtitulo),l(4),b("ngModel",o.nuevoArticulo.contenido),l(7),y(o.datosTerminosCondiciones.articulos),l(4),b("ngModel",o.datosTerminosCondiciones.activo),l(6),E(o.evento==="EVENTO_GUARDAR"?56:-1),l(),E(o.evento==="EVENTO_ACTUALIZAR"?57:-1))},dependencies:[F,B,j,L,z,U],encapsulation:2})};var ee=(s,n)=>n._id;function ie(s,n){if(s&1&&(t(0,"div",30),r(1),i()),s&2){let e=p().$implicit;l(),m(e.subtitulo)}}function te(s,n){if(s&1&&(t(0,"div",22)(1,"h6",29),r(2),i(),S(3,ie,2,1,"div",30),t(4,"div",31),r(5),i()()),s&2){let e=n.$implicit;l(2),m(e.titulo),l(),E(e.subtitulo.length>0?3:-1),l(2),h(" ",e.contenido," ")}}function ne(s,n){if(s&1){let e=T();t(0,"tr")(1,"td"),r(2),i(),t(3,"td"),r(4),i(),t(5,"td"),r(6),i(),t(7,"td",20),r(8),i(),t(9,"td",21),I(10,te,6,3,"div",22,A),i(),t(12,"td",23)(13,"div",24)(14,"button",25),d("click",function(){let c=v(e).$implicit,a=p();return _(a.actualizar(c))}),f(15,"i",26),r(16," Editar "),i(),t(17,"button",27),d("click",function(){let c=v(e).$implicit,a=p();return _(a.eliminarTerminoCondiciones(c))}),f(18,"i",28),r(19," Eliminar "),i()()()()}if(s&2){let e=n.$implicit;l(2),m(e.titulo),l(2),m(e.subtitulo),l(2),m(e.version),l(2),m(e.vigencia),l(2),y(e.articulos)}}function oe(s,n){s&1&&(t(0,"tr")(1,"td",32),r(2," No hay registros para mostrar. "),i()())}var K=class s{utilidadesService=u(k);modalService=u(G);terminosCondicionesService=u(x);cargando=!1;terminos=[];filtro=Object.assign({},J);ngOnInit(){this.consultar()}modificarFiltroActivo=()=>{this.filtro.activo=!this.filtro.activo,this.consultar()};crear=()=>R(this,null,function*(){let n=this.modalService.open(M,{centered:!0,size:"xl"});n.componentInstance.evento="EVENTO_GUARDAR",(yield n.result)&&this.consultar()});actualizar=n=>R(this,null,function*(){let e=this.modalService.open(M,{centered:!0,size:"xl"});e.componentInstance.evento="EVENTO_ACTUALIZAR",e.componentInstance.datosTerminosCondiciones=n,(yield e.result)&&this.consultar()});eliminarTerminoCondiciones=n=>{this.utilidadesService.abrirModalConfirmacion("Informaci\xF3n",`Estas seguros que quires eliminar los terminos y condiciones ${n.titulo}?`,"Eliminar","Cancelar").then(e=>{e&&this.eliminar(n._id??"")})};eliminar=n=>{this.cargando=!0,this.terminosCondicionesService.eliminarTerminos({id:n}).subscribe({next:e=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",e.resultadoOperacion,"Aceptar"),e.estatus&&this.consultar()},error:e=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",e.error.resultadoOperacion,"Aceptar")}})};consultar=()=>{this.cargando=!0,this.terminosCondicionesService.consultarTerminos(this.filtro).subscribe({next:n=>{this.cargando=!1,n.estatus?this.terminos=n.data:this.utilidadesService.abrirModalInfo("Informaci\xF3n",n.resultadoOperacion,"Aceptar")},error:n=>{this.cargando=!1,this.utilidadesService.abrirModalInfo("Informaci\xF3n",n.error.resultadoOperacion,"Aceptar")}})};static \u0275fac=function(e){return new(e||s)};static \u0275cmp=w({type:s,selectors:[["app-terminos-condiciones"]],decls:42,vars:5,consts:[[3,"messageInput","loading"],[1,"container","py-5","mt-5"],[1,"d-flex","flex-column","flex-md-row","justify-content-between","align-items-md-center","mb-4"],[1,"fw-bold","text-dark","mb-1"],[1,"text-muted","mb-0"],[1,"btn","boton-principal-kia","mt-3",3,"click"],[1,"card","border-0","rounded-3","mb-4"],[1,"card-body","d-flex","flex-wrap","align-items-center","gap-3"],[1,"fw-semibold","mb-0"],[1,"form-check","form-switch","d-flex","align-items-center","gap-2"],["type","checkbox","role","switch",1,"form-check-input",3,"change","checked"],[1,"form-check-label","fw-medium"],[1,"card","border-0","shadow-sm","rounded-4"],[1,"table-responsive"],[1,"table","align-middle","mb-0"],[1,"table-light"],[1,"fw-semibold"],[1,"fw-semibold","text-center"],[1,"card-footer","d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"text-uppercase"],[2,"white-space","pre-wrap","max-width","900px"],[1,"mb-3","p-2","border-start","border-3","border-primary","rounded","bg-light"],[1,"text-center"],[1,"d-flex","justify-content-center","gap-2"],[1,"btn","btn-outline-dark","rounded-pill","px-3","d-inline-flex","align-items-center","gap-2",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-outline-secondary","rounded-pill","px-3","d-inline-flex","align-items-center","gap-2",3,"click"],[1,"fa-solid","fa-trash"],[1,"fw-bold","mb-1","text-primary"],[1,"text-muted","small","mb-1"],[1,"text-dark"],["colspan","6",1,"text-center","py-4","text-muted"]],template:function(e,o){e&1&&(f(0,"app-loading-screen",0),t(1,"div",1)(2,"div",2)(3,"div")(4,"h3",3),r(5,"T\xE9rminos & Condiciones"),i(),t(6,"p",4),r(7," Gesti\xF3n de los t\xE9rminos y condiciones vigentes en la plataforma. "),i()(),t(8,"button",5),d("click",function(){return o.crear()}),r(9," Nuevo t\xE9rmino & condici\xF3n "),i()(),t(10,"div",6)(11,"div",7)(12,"h6",8),r(13,"Filtrar por:"),i(),t(14,"div",9)(15,"input",10),d("change",function(){return o.modificarFiltroActivo()}),i(),t(16,"label",11),r(17," Estado de los terminos "),i()()()(),t(18,"div",12)(19,"div",13)(20,"table",14)(21,"thead",15)(22,"tr")(23,"th",16),r(24,"T\xCDTULO"),i(),t(25,"th",16),r(26,"SUBT\xCDTULO"),i(),t(27,"th",16),r(28,"VERSI\xD3N"),i(),t(29,"th",16),r(30,"VIGENCIA"),i(),t(31,"th",16),r(32,"ART\xCDCULOS"),i(),t(33,"th",17),r(34,"ACCIONES"),i()()(),t(35,"tbody"),I(36,ne,20,4,"tr",null,ee,!1,oe,3,0,"tr"),i()()(),t(39,"div",18)(40,"span",19),r(41),i()()()()),e&2&&(O("messageInput","Cargando...")("loading",o.cargando),l(15),O("checked",o.filtro.activo),l(21),y(o.terminos),l(5),h("Mostrando ",o.terminos.length," registros"))},dependencies:[H],encapsulation:2})};export{K as TerminosCondiciones};
