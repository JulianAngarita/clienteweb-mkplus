<app-loading-screen [loading]="cargando" [messageInput]="'Cargando...'"></app-loading-screen>

<div class="container-fluid min-vh-100 p-4 my-5">
    <div class="row justify-content-center">
        <div class="col-xxl-6 col-xl-7 col-lg-8 col-md-10">
            <div class="bg-white border-1 p-4">
                <!-- Header -->
                <div class="mb-4 pb-3 border-bottom">
                    <button routerLink="/tienda/cotizador-tienda"
                        class="btn btn-link text-dark p-0 mb-3 fw-semibold text-decoration-none text-start"
                        (click)="atras()"
                    >
                        <i class="fas fa-arrow-left me-2"></i> Volver
                    </button>
                    <h1 class="h2 fw-bold text-dark mb-2">Prepagado Kia</h1>
                    <p class="text-muted mb-0">Formulario Mantenimiento Prepagado Kia</p>
                </div>

                <!-- Formulario -->
                <div class="row g-4">
                    <!-- Nombres -->
                    @if (cliente.nombre) {
                        <div class="col-12">
                            <div class="input-kia">
                                <label class="input-kia-label">Nombres</label>
                                <input [(ngModel)]="cliente.nombre.nombres" 
                                    type="text" 
                                    class="input-kia-field" 
                                    placeholder=" "
                                >
                            </div>
                        </div>
                    }


                    <!-- Apellidos -->
                     @if (cliente.nombre) {
                        <div class="col-12">
                            <div class="input-kia">
                                <label class="input-kia-label">Apellidos</label>
                                <input [(ngModel)]="cliente.nombre.apellidos" 
                                    type="text" 
                                    class="input-kia-field" 
                                    placeholder=" "
                                >
                            </div>
                        </div>
                     }


                    <!-- Tipo Identificación -->
                    @if (cliente.nombre) {
                        <div class="col-md-4">
                            <label class="input-kia-label text-dark">Tipo de Identificación</label>
                            <div ngbDropdown class="d-inline-block w-100">
                                <button 
                                    type="button" 
                                    class="input-kia-field w-100 text-start d-flex justify-content-between align-items-center"
                                    id="dropdownBasic1" 
                                    ngbDropdownToggle
                                >
                                    <span>{{ cliente.identificacion?.tipo ? cliente.identificacion?.tipo : 'Seleccionar tipo' }}</span>
                                </button>
                                <div 
                                    style="min-width: 100%; max-height: 300px;" 
                                    class="border-0 shadow-sm mt-2 overflow-auto" 
                                    ngbDropdownMenu 
                                    aria-labelledby="dropdownBasic1"
                                > 
                                    @for (tipo of listadoTipos; track $index) {
                                        <button
                                            class="dropdown-item py-3 border-bottom" 
                                            ngbDropdownItem
                                            (click)="seleccionTipoId(tipo.tipo)"
                                        >
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="fw-semibold">{{ tipo.tipo }}</span>
                                                <span class="text-muted small">{{ tipo.nombre }}</span>
                                            </div>
                                        </button>
                                    }

                                </div>
                            </div>
                        </div>
                    }
                            
                    <!-- Número Identificación -->
                    @if (cliente.identificacion) {
                        <div class="col-md-8">
                            <div class="input-kia">
                                <label class="input-kia-label">Número de Identificación</label>
                                <input [(ngModel)]="cliente.identificacion.numero" 
                                    type="text" 
                                    class="input-kia-field" 
                                    placeholder=" "
                                >
                            </div>
                        </div>
                    }

                    <!-- Celular -->
                    @if (cliente.telefonos) {
                        <div class="col-12">
                            <div class="input-kia">
                                <label class="input-kia-label">Celular</label>
                                <input [(ngModel)]="cliente.telefonos.celular" 
                                    type="text" 
                                    class="input-kia-field" 
                                    placeholder=" "
                                >
                            </div>
                        </div>
                    }

                    <!-- Email -->
                    @if (cliente.nombre) {
                        <div class="col-12">
                            <div class="input-kia">
                                <label class="input-kia-label">Correo Electrónico</label>
                                <input 
                                    [(ngModel)]="cliente.email" 
                                    type="email" 
                                    class="input-kia-field" 
                                    placeholder=" "
                                >
                            </div>
                        </div>
                    }
                </div>

                <!-- Botón Siguiente -->
                <div class="d-flex justify-content-end mt-5 pt-3 border-top">
                    <button
                        class="boton-principal-kia d-flex align-items-center gap-3"
                        (click)="guardarCliente()"
                    >
                        <span>Siguiente</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>